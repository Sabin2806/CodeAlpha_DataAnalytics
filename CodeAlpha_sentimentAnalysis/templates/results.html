<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detailed Results - Sentiment Analysis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .sentiment-header {
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }
        .emoji-xl {
            font-size: 5rem;
        }
        .score-card {
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }
        .score-card:hover {
            transform: translateY(-5px);
        }
        .progress {
            height: 25px;
            border-radius: 12px;
        }
        .progress-bar {
            border-radius: 12px;
        }
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- Back Button -->
    <a href="/" class="back-btn btn btn-light btn-lg">
        <i class="fas fa-arrow-left"></i> Back
    </a>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <!-- Header -->
                <div class="text-center mb-5">
                    <h1 class="display-4 fw-bold text-white mb-3">Detailed Analysis Results</h1>
                    <p class="lead text-white">Comprehensive sentiment analysis report</p>
                </div>

                {% if result %}
                <!-- Main Sentiment Card -->
                <div class="glass-card p-5 mb-5">
                    <div class="row align-items-center">
                        <div class="col-md-4 text-center">
                            <div class="emoji-xl mb-3">{{ result.sentiment_icon }}</div>
                            <h1 class="display-6 fw-bold text-{{ result.color }}">{{ result.sentiment }}</h1>
                            <div class="mt-3">
                                <span class="badge bg-{{ result.color }} fs-6 p-3">{{ result.confidence }}% Confidence</span>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <h3 class="fw-bold mb-4">Analysis Summary</h3>
                            <div class="row">
                                <div class="col-6">
                                    <p><i class="fas fa-smile text-{{ result.color }} me-2"></i><strong>Emotion:</strong> {{ result.emotion_icon }} {{ result.emotion }}</p>
                                    <p><i class="fas fa-chart-line text-{{ result.color }} me-2"></i><strong>Polarity:</strong> {{ result.polarity }}</p>
                                </div>
                                <div class="col-6">
                                    <p><i class="fas fa-brain text-{{ result.color }} me-2"></i><strong>Subjectivity:</strong> {{ result.subjectivity }}</p>
                                    <p><i class="fas fa-clock text-{{ result.color }} me-2"></i><strong>Analyzed:</strong> {{ result.timestamp }}</p>
                                </div>
                            </div>
                            
                            <!-- Detected Sources -->
                            <div class="mt-4">
                                <h5><i class="fas fa-tags me-2"></i>Detected Sources</h5>
                                <div>
                                    {% for source in result.sources %}
                                    <span class="badge bg-primary fs-6 p-2 me-2 mb-2">{{ source }}</span>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Scores -->
                <div class="row g-4 mb-5">
                    <div class="col-md-4">
                        <div class="score-card bg-success bg-opacity-10">
                            <h5><i class="fas fa-thumbs-up text-success me-2"></i>Positive Score</h5>
                            <div class="progress mt-3">
                                <div class="progress-bar bg-success" style="width: {{ result.vader_scores.pos * 100 }}%">
                                    {{ (result.vader_scores.pos * 100)|round(1) }}%
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="score-card bg-danger bg-opacity-10">
                            <h5><i class="fas fa-thumbs-down text-danger me-2"></i>Negative Score</h5>
                            <div class="progress mt-3">
                                <div class="progress-bar bg-danger" style="width: {{ result.vader_scores.neg * 100 }}%">
                                    {{ (result.vader_scores.neg * 100)|round(1) }}%
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="score-card bg-info bg-opacity-10">
                            <h5><i class="fas fa-minus-circle text-info me-2"></i>Neutral Score</h5>
                            <div class="progress mt-3">
                                <div class="progress-bar bg-info" style="width: {{ result.vader_scores.neu * 100 }}%">
                                    {{ (result.vader_scores.neu * 100)|round(1) }}%
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Text Statistics -->
                <div class="glass-card p-5 mb-5">
                    <h3 class="fw-bold mb-4"><i class="fas fa-chart-bar me-2"></i>Text Statistics</h3>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="d-flex justify-content-between mb-3">
                                <span><i class="fas fa-font me-2"></i>Total Characters</span>
                                <span class="fw-bold">{{ result.char_count }}</span>
                            </div>
                            <div class="d-flex justify-content-between mb-3">
                                <span><i class="fas fa-file-word me-2"></i>Total Words</span>
                                <span class="fw-bold">{{ result.word_count }}</span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex justify-content-between mb-3">
                                <span><i class="fas fa-filter me-2"></i>Processed Words</span>
                                <span class="fw-bold">{{ result.processed_text.split()|length }}</span>
                            </div>
                            <div class="d-flex justify-content-between mb-3">
                                <span><i class="fas fa-percentage me-2"></i>Compound Score</span>
                                <span class="fw-bold">{{ result.vader_scores.compound|round(3) }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Processed Text -->
                {% if result.processed_text %}
                <div class="glass-card p-5 mb-5">
                    <h3 class="fw-bold mb-4"><i class="fas fa-code me-2"></i>Processed Text</h3>
                    <div class="bg-light p-4 rounded">
                        <p class="mb-0">{{ result.processed_text }}</p>
                    </div>
                    <small class="text-muted mt-2">
                        <i class="fas fa-info-circle me-1"></i> Text after removing URLs, special characters, and stopwords
                    </small>
                </div>
                {% endif %}

                <!-- Interpretation -->
                <div class="glass-card p-5">
                    <h3 class="fw-bold mb-4"><i class="fas fa-lightbulb me-2"></i>Interpretation & Insights</h3>
                    
                    {% if result.sentiment == 'Positive' %}
                    <div class="alert alert-success">
                        <h5><i class="fas fa-check-circle me-2"></i>Positive Sentiment Detected</h5>
                        <p class="mb-0">
                            The text expresses overall positive sentiment. This indicates satisfaction, approval, 
                            or happiness with the subject matter. Positive reviews like this can be used to:
                        </p>
                        <ul class="mt-2">
                            <li>Identify successful products or services</li>
                            <li>Highlight customer satisfaction in marketing</li>
                            <li>Reinforce positive aspects of your offering</li>
                            <li>Build social proof and credibility</li>
                        </ul>
                    </div>
                    {% elif result.sentiment == 'Negative' %}
                    <div class="alert alert-danger">
                        <h5><i class="fas fa-exclamation-triangle me-2"></i>Negative Sentiment Detected</h5>
                        <p class="mb-0">
                            The text expresses overall negative sentiment. This indicates dissatisfaction, criticism, 
                            or frustration. Consider this feedback for improvement opportunities:
                        </p>
                        <ul class="mt-2">
                            <li>Address customer complaints promptly</li>
                            <li>Identify pain points in products or services</li>
                            <li>Improve customer support processes</li>
                            <li>Track recurring issues for systemic solutions</li>
                        </ul>
                    </div>
                    {% else %}
                    <div class="alert alert-info">
                        <h5><i class="fas fa-info-circle me-2"></i>Neutral Sentiment Detected</h5>
                        <p class="mb-0">
                            The text expresses neutral or mixed sentiment. This may indicate factual information, 
                            balanced opinions, or uncertain feelings. Consider:
                        </p>
                        <ul class="mt-2">
                            <li>Looking for specific suggestions or detailed feedback</li>
                            <li>Engaging with the author for clarification</li>
                            <li>Monitoring for sentiment changes over time</li>
                            <li>Considering context and external factors</li>
                        </ul>
                    </div>
                    {% endif %}
                    
                    <!-- Action Recommendations -->
                    <div class="mt-4">
                        <h5><i class="fas fa-rocket me-2"></i>Recommended Actions</h5>
                        <div class="row mt-3">
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h6><i class="fas fa-chart-line text-primary me-2"></i>For Marketing</h6>
                                        <small>
                                            Use {{ result.sentiment.lower() }} sentiment insights to refine marketing messages 
                                            and target audience segments more effectively.
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h6><i class="fas fa-cogs text-success me-2"></i>For Product Development</h6>
                                        <small>
                                            Incorporate {{ result.emotion.lower() }} emotion feedback into product 
                                            improvement cycles and feature prioritization.
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="text-center mt-5">
                    <a href="/" class="btn btn-primary btn-lg me-3">
                        <i class="fas fa-home me-2"></i>Back to Analyzer
                    </a>
                    <button class="btn btn-outline-primary btn-lg" onclick="window.print()">
                        <i class="fas fa-print me-2"></i>Print Report
                    </button>
                </div>

                {% else %}
                <!-- No Results -->
                <div class="glass-card p-5 text-center">
                    <i class="fas fa-search fa-4x text-muted mb-4"></i>
                    <h3 class="mb-3">No Analysis Results Found</h3>
                    <p class="text-muted mb-4">Please go back and analyze some text first.</p>
                    <a href="/" class="btn btn-primary btn-lg">
                        <i class="fas fa-arrow-left me-2"></i>Back to Analyzer
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-white text-center py-4">
        <div class="container">
            <p class="mb-0">Sentiment Analysis Tool &copy; 2024 | Detailed Analysis Report</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>